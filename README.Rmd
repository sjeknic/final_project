---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
# Please put your title here to include it in the file below.
Title <- "Genome-wide study of mRNA degradation and transcript elongation in Escherichia coli - a replication"
```

# finalproject

[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh///master?urlpath=rstudio)

This Final Project is designed to replicate the analysis contained within "Genome-wide study of mRNA degradation and transcript elongation in Escherichia coli", specifically to replicate Figure 3a: Distributions of lifetimes and elongation rates measured for exponentially growing cells.

### How to cite

Please cite this compendium as:

> Jeknic, Stevan et al. (2021). Genome-wide study of mRNA degradation and transcript elongation in Escherichia coli - a replication. Accessed `r format(Sys.Date(), "%d %b %Y")`.
Online at <https://github.com/sjeknic/final_project>.

## How to run in your browser or download and run locally

This research compendium has been developed using the statistical programming
language R. To work with the compendium, you will need
installed on your computer the [R software](https://cloud.r-project.org/)
itself and optionally [RStudio Desktop](https://rstudio.com/products/rstudio/download/).

You can clone the repository from this URL:
[final_project](https://github.com/sjeknic/final_project). After unzipping:
- open the `.Rproj` file in RStudio
- run `devtools::install()` to ensure you have the packages this analysis depends on (also listed in the
[DESCRIPTION](/DESCRIPTION) file).

## Usage
Use `load_raw_data` to load the data you would like to plot for analysis. This function takes the file name and data path as its arguments.
```{r}
require(tidyverse)
require(ggplot2)
require(gridExtra)

load_raw_data <- function(filename, data_path="analysis/data/raw_data") {
  fname <- file.path(data_path, filename)
  if(!file.exists(fname)) {
    stop(cat("Could not find file ", fname), call. = FALSE)
  }
  df <- read.csv(file.path(data_path, filename))
}
```

To confirm the columns within the dataframe are appropriately labelled, you can call the `confirm_columns` function, this takes the output of the above function, and a specific column name as arguments, and checks that they exist within the dataframe.
```{r}
confirm_columns <- function(input_data, colname) {
  # Confirm that the column name exists
  if(is.null(input_data[[colname]])) {
    stop(cat("Missing column ", colname, "in data frame ", input_data), call. = FALSE)
  }
}
```

To visualize the output, use the `plot_histogram` function with the `input_data` generated from `load_raw_data`.
```{r}
plot_histogram <- function(input_data, colname, binwidth=0.5, xh=10, yh=160) {
  # Confirm that the columns exist
  confirm_columns(input_data, colname)

  # Generate basic plot object
  fig <- ggplot(input_data, aes_string(x=colname)) + geom_histogram(binwidth=binwidth) + xlim(0, xlim) + ylim(0, ylim)
  fig
}
```

An example of this in action is used to plot the histogram from the supplemental table 4 within the original paper.
```{r}
newst <- load_raw_data("supp_table4.csv")
plot <- plot_histogram(newst, "Avg.lifetime", binwidth=0.5, xh=10, yh=160)
plot
```

## Contents

The **analysis** directory contains:

  - [:file\_folder: paper](/analysis/paper): R Markdown source document
    for manuscript. Includes code to reproduce the figures and tables
    generated by the analysis. It also has a rendered version,
    `paper.docx`, suitable for reading (the code is replaced by figures
    and tables in this file)
  - [:file\_folder: data](/analysis/data/raw_data): Data used in the analysis.
  - [:file\_folder: figures](/analysis/figures): Plots and other
    illustrations
  - [:file\_folder:
    supplementary-materials](/analysis/supplementary-materials):
    Supplementary materials including notes and other documents
    prepared and collected during the analysis.
    

### Licenses

**Text and figures :**  [CC-BY-4.0](http://creativecommons.org/licenses/by/4.0/)

**Code :** See the [DESCRIPTION](DESCRIPTION) file

**Data :** [CC-0](http://creativecommons.org/publicdomain/zero/1.0/) attribution requested in reuse

### Contributions

We welcome contributions from everyone. Before you get started, please see our [contributor guidelines](CONTRIBUTING.md). Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.
